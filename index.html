<html>
<meta name="viewport" content="width=device-width">
<style>
    #bottombar {
        position: fixed;
        left: 0px;
        right: 0px;
        top: 0px;
        bottom: 0px;
        color: white;
        text-align: center;
        background-color: #777777ee;
        transform-origin: left top;
        transform: translate(0px, 0px) scale(1);
        visibility: hidden;
    }
</style>
<head>
<script>
document.addEventListener("DOMContentLoaded", function () {
    // ページを開いたら注意文言削除イベントを設定
    var viewport = window.visualViewport;
    if (viewport) {
        viewport.addEventListener('scroll', 注意文言を隠す);
        viewport.addEventListener('resize', 注意文言を隠す);
        注意文言を隠す();
    }
});
</script>
</head>
<body>
    <div id="bottombar"><br/>画面が拡大されています<br/>指2本で画面を縮小してください<br/><br/></div>
    <button onclick="モーダルを開く()">モーダルを開く</button><br />
    <button onclick="モーダルを閉じる()">モーダルを閉じる</button><br />
    Scale: <span id="position">1</span><br />
</body>

<script>
function 注意文言を隠す() {
    document.getElementById('bottombar').style.visibility = "hidden";
    document.getElementById('position').textContent = Math.round(window.visualViewport.scale*100)*0.01;
}

function モーダルを開く() {

    // モーダルを開く処理とか

    // 中略

    // 10%以上拡大されていたら、注意文言を表示
    var viewport = window.visualViewport;
    if (viewport && viewport.scale >= 1.0) {
        var bottomBar = document.getElementById('bottombar');
        var offsetLeft = viewport.offsetLeft;
        //var offsetTop = viewport.height - screen.height + viewport.offsetTop;
        var offsetTop = viewport.offsetTop;
        bottomBar.style.transform = `translate(${offsetLeft}px, ${offsetTop}px) scale(${1/viewport.scale})`;
        bottomBar.style.visibility = "visible";
    }
}

function モーダルを閉じる() {
    // モーダルを閉じる処理
    
    // 中略

    // 注意文言も消す
    注意文言を隠す();
}
</script>
</html>
